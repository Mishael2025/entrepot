<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
        <script src="../libs/chart.umd.js"></script>

        <link rel="stylesheet" href="../css/acceuil.css">
    </head>

    <body>
        <div id="sidebar-container"></div>
        <div id="role-label" class="role-badge"></div>

        <header>
            <div class="logo"><img src="../Images/entrepot png.png" alt srcset>
                Entrep√¥t Alimentaire</div>
            <div id="clock"></div>
        </header>

        <main>
            <section class="volumes-produits">
                <h2><i class="fas fa-cubes"></i> Vue synth√©tique du stock</h2>

                <div class="dashboard-grid">
                    <!-- üî¢ Total produits -->
                    <div class="stat-card">
                        <i class="fas fa-boxes"></i>
                        <span id="total-produits">--</span> Produits
                    </div>

                    <!--  Volumes par produit (dynamique) -->
                    <div id="volume-par-unite" class="unite-container">
                        <!-- Les blocs par unit√© seront inject√©s ici -->
                    </div>

                    <!--  Produits critiques -->
                    <div class="stat-card alert">
                        <i class="fas fa-exclamation-triangle"></i>
                        <span id="produits-critique">--</span> Critiques
                    </div>

                    <!--  Produits p√©rim√©s -->
                    <div class="stat-card warn">
                        <i class="fas fa-clock"></i>
                        <span id="peremption">--</span> P√©rim√©s/Bient√¥t
                    </div>

                    <!--  Fournisseurs (si pr√©sent dans l'API) -->
                    <div class="stat-card">
                        <i class="fas fa-truck"></i>Fournisseurs
                        <span id="total-fournisseurs">--</span> 
                    </div>

                    <!--  Sorties (si pr√©sent dans l'API) -->
                    <div class="stat-card">
                        <i class="fas fa-arrow-up"></i>
                        <span id="total-sorties">--</span> Sorties
                    </div>
                </div>

                <!--  Notifications -->
                <div class="notifications">
                    <h3><i class="fas fa-bell"></i> Notifications</h3>
                    <ul id="notif-list"></ul>
                </div>

                <!--  Sparkline -->
                <div class="cockpit">
                    <h3><i class="fas fa-chart-line"></i> Sorties r√©centes</h3>
                    <canvas id="sparkline"></canvas>
                </div>
            </section>

            <section class="notifications">
                <h2><i class="fas fa-bell"></i> Notifications</h2>
                <ul id="notif-list"></ul>
            </section>

            <section class="cockpit">
                <h2><i class="fas fa-lightbulb"></i> Cockpit analytique</h2>
                <canvas id="sparkline"></canvas>
            </section>
        </main>

        <script src="..//js/acceuil.js"></script>

        <script src="../js/sessionStorage.js"></script>
        <script>

        // Place ce code juste apr√®s l'injection du sidebar
        fetch("../html/sidebard.html")
            .then(r => r.text())
            .then(html => {
                document.getElementById("sidebar-container").innerHTML = html;

                // Ajoute le listener sur le bouton de d√©connexion
                const logoutBtn = document.getElementById("logout-btn");
                if (logoutBtn) {
                    logoutBtn.addEventListener("click", function () {
                        sessionStorage.clear();
                        localStorage.clear();
                        window.location.href = "../html/PageConnexion.html";
                    });
                }
            });

</script>
    </body>

</html>