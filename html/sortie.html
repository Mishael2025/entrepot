<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8">
  <title>Sortie de Stock</title>
  <link rel="stylesheet" href="../css/sortie.css"> <!--  Ajoute un fichier CSS si n√©cessaire -->
</head>
<script src="../libs/chart.umd.js"></script> <!-- üìå Version locale si install√©e -->

<body>
  <textarea class="field-sortie editable-field"></textarea>
  <div class="role-label"></div>
  <div id="sidebar-container"></div>
  <div class="main">
    <h1>Gestion des Sorties de Stock</h1>
    <div class="flex-zone">
      <form id="stock-out-form">
        <input type="text" id="product-name-out" placeholder="Nom du produit" required>
        <input type="number" id="quantity-out" placeholder="Quantit√© √† retirer" required>

        <label for="unit">Unit√© :</label>
        <select id="unit" required>
          <option value="kg">Kilos (kg)</option>
          <option value="L">Litres (L)</option>
          <option value="pcs">Pi√®ces (pcs)</option>
          <option value="box">Cartons (box)</option>
        </select>

        <label for="reason-out">Motif :</label>
        <select id="reason-out" required>
          <option value="vente">Vente</option>
          <option value="perte">Perte</option>
          <option value="donation">Donation</option>
          <option value="transfert">Transfert</option>
        </select>



        <input type="date" id="date-mouvement"> <!-- facultatif -->

        <input type="hidden" id="type-mouvement" value="sortie"> <!-- fixe -->

        <button id="remove-product-btn">Retirer Produit</button>
      </form>

      <div id="stock-sidebar">
        <input type="text" id="search-product" placeholder="Rechercher un produit..." />

        <div id="liste-produits" class="grille-produits">
          <h3>Produits en stock</h3>
          <div id="produits-stock-grid" class="grid-container"></div>
          <div id="no-results" style="display: none; margin-top: 10px; color: #888;">
            Aucun produit correspondant.
          </div>
        </div>
      </div>

    </div>


    <h2>√âvaluation des Sorties</h2>

    <div id="badges-container"></div>

    <canvas id="motif-chart"></canvas>
    <div id="chart-section">
      <h2>Statistiques</h2>
      <canvas id="line-chart" width="400" height="200"></canvas>
      <canvas id="bar-chart" width="400" height="200"></canvas>
      <canvas id="scatter-chart" width="400" height="200"></canvas>
      <button id="refresh-btn">üîÑ</button>
    </div>

    <script>
      // Place ce code juste apr√®s l'injection du sidebar
      fetch("../html/sidebard.html")
        .then(r => r.text())
        .then(html => {
          const container = document.getElementById("sidebar-container");
          container.innerHTML = html;

          //  Attendre que le DOM inject√© soit bien interpr√©t√©
          setTimeout(() => {
            const logoutBtn = document.getElementById("logout-btn");
            if (logoutBtn) {
              logoutBtn.addEventListener("click", () => {
                sessionStorage.clear();
                localStorage.clear();
                window.location.href = "../html/PageConnexion.html";
              });
            } else {
              console.warn(" Bouton #logout-btn introuvable dans sidebard.html");
            }
          }, 50); // ‚Üê Ajustable selon la complexit√© du HTML inject√©
        });


    </script>
    <script src="../js/sessionStorage.js"></script>
    <script src="../js/Historique.sortie.js"></script>
    <script src="../js/sortie.js"></script> <!-- ‚úÖ Lien vers ton fichier JS -->
</body>

</html>